---
toc_max_heading_level: 6
keywords: [docker]
tags: [docker]
---

:::tip 一言
十月到幽州，戈鋋若罗星。 --- 《经乱离后天恩流夜郎忆旧游书怀赠江夏韦太守良宰》 · 唐代 李白
:::

<details>
  <summary>全文</summary>
天上白玉京，十二楼五城。仙人抚我顶，结发受长生。<br>误逐世间乐，颇穷理乱情。九十六圣君，浮云挂空名。<br>天地赌一掷，未能忘战争。试涉霸王略，将期轩冕荣。<br>时命乃大谬，弃之海上行。学剑翻自哂，为文竟何成。<br>剑非万人敌，文窃四海声。儿戏不足道，五噫出西京。<br>临当欲去时，慷慨泪沾缨。叹君倜傥才，标举冠群英。<br>开筵引祖帐，慰此远徂征。鞍马若浮云，送余骠骑亭。<br>歌钟不尽意，白日落昆明。十月到幽州，戈鋋若罗星。<br>君王弃北海，扫地借长鲸。呼吸走百川，燕然可摧倾。<br>心知不得语，却欲栖蓬瀛。弯弧惧天狼，挟矢不敢张。<br>揽涕黄金台，呼天哭昭王。无人贵骏骨，騄耳空腾骧。<br>乐毅倘再生，于今亦奔亡。蹉跎不得意，驱马还贵乡。<br>逢君听弦歌，肃穆坐华堂。百里独太古，陶然卧羲皇。<br>征乐昌乐馆，开筵列壶觞。贤豪间青娥，对烛俨成行。<br>醉舞纷绮席，清歌绕飞梁。欢娱未终朝，秩满归咸阳。<br>祖道拥万人，供帐遥相望。一别隔千里，荣枯异炎凉。<br>炎凉几度改，九土中横溃。汉甲连胡兵，沙尘暗云海。<br>草木摇杀气，星辰无光彩。白骨成丘山，苍生竟何罪。<br>函关壮帝居，国命悬哥舒。长戟三十万，开门纳凶渠。<br>公卿如犬羊，忠谠醢与菹。二圣出游豫，两京遂丘墟。<br>帝子许专征，秉旄控强楚。节制非桓文，军师拥熊虎。<br>人心失去就，贼势腾风雨。惟君固房陵，诚节冠终古。<br>仆卧香炉顶，餐霞漱瑶泉。门开九江转，枕下五湖连。<br>半夜水军来，浔阳满旌旃。空名适自误，迫胁上楼船。<br>徒赐五百金，弃之若浮烟。辞官不受赏，翻谪夜郎天。<br>夜郎万里道，西上令人老。扫荡六合清，仍为负霜草。<br>日月无偏照，何由诉苍昊。良牧称神明，深仁恤交道。<br>一忝青云客，三登黄鹤楼。顾惭祢处士，虚对鹦鹉洲。<br>樊山霸气尽，寥落天地秋。江带峨眉雪，川横三峡流。<br>万舸此中来，连帆过扬州。送此万里目，旷然散我愁。<br>纱窗倚天开，水树绿如发。窥日畏衔山，促酒喜得月。<br>吴娃与越艳，窈窕夸铅红。呼来上云梯，含笑出帘栊。<br>对客小垂手，罗衣舞春风。宾跪请休息，主人情未极。<br>览君荆山作，江鲍堪动色。清水出芙蓉，天然去雕饰。<br>逸兴横素襟，无时不招寻。朱门拥虎士，列戟何森森。<br>剪凿竹石开，萦流涨清深。登台坐水阁，吐论多英音。<br>片辞贵白璧，一诺轻黄金。谓我不愧君，青鸟明丹心。<br>五色云间鹊，飞鸣天上来。传闻赦书至，却放夜郎回。<br>暖气变寒谷，炎烟生死灰。君登凤池去，忽弃贾生才。<br>桀犬尚吠尧，匈奴笑千秋。中夜四五叹，常为大国忧。<br>旌旆夹两山，黄河当中流。连鸡不得进，饮马空夷犹。<br>安得羿善射，一箭落旄头。
</details>


---

## 批量删除docker容器

批量删除这些容器，可以使用以下 Docker 命令：

```bash
docker ps -a -q --filter "ancestor=hello-world" | xargs docker rm
```

解释：

- `docker ps -a -q --filter "ancestor=hello-world"`：列出所有使用 `hello-world` 镜像的容器（包括已经停止的容器）。
- `xargs docker rm`：将这些容器 ID 传递给 `docker rm` 命令进行删除。

这样可以一次性删除所有由 `hello-world` 镜像创建的容器。如果你确认不再需要这些容器，可以使用此命令批量删除它们。

### 1. `-q`

`-q` 是 `docker ps` 命令的一个选项，它表示“静默模式”或“只输出容器ID”。默认情况下，`docker ps` 会显示容器的详细信息（例如：容器ID、镜像名、状态等），而使用 `-q` 后，命令只会返回容器的ID（一个简短的哈希值），更适合批量处理操作。

例如：

```bash
docker ps
```

会显示类似如下的信息：

```
CONTAINER ID   IMAGE         COMMAND   CREATED         STATUS        NAMES
12b2c2ae3684   hello-world   "/hello"  2 days ago      Exited (0)    distracted_northcutt
```

而：

```bash
docker ps -q
```

会输出容器ID：

```
12b2c2ae3684
```

### 2. `--filter "ancestor=hello-world"`

`--filter` 选项用于过滤容器。`ancestor=hello-world` 过滤条件表示只选取由 `hello-world` 镜像创建的容器。这个选项帮助我们在列出容器时筛选出特定镜像下的容器。

例如：

```bash
docker ps -a --filter "ancestor=hello-world"
```

只会列出由 `hello-world` 镜像创建的容器，而不是所有容器。

### 3. `xargs`

`xargs` 是一个常用的 Linux 命令，用于将输入数据（通常是通过管道传递给它的数据）转化为命令行参数并执行命令。在这里，`xargs` 将通过管道传递给它的容器ID列表作为参数传递给 `docker rm` 命令，从而批量删除容器。

例如，假设 `docker ps -a -q --filter "ancestor=hello-world"` 返回了一些容器ID：

```
12b2c2ae3684
360c6c90d845
```

那么：

```bash
docker ps -a -q --filter "ancestor=hello-world" | xargs docker rm
```

相当于执行了：

```bash
docker rm 12b2c2ae3684 360c6c90d845
```

这样，`xargs` 会将所有通过管道传递的容器ID集合起来，并将它们作为 `docker rm` 命令的参数执行。

### 总结

- `-q`：仅输出容器ID。
- `--filter "ancestor=hello-world"`：过滤出由 `hello-world` 镜像创建的容器。
- `xargs`：将接收到的容器ID列表传递给 `docker rm` 命令进行删除。

组合起来，这个命令会批量删除所有由 `hello-world` 镜像创建的容器。