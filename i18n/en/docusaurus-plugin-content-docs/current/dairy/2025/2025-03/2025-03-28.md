---
toc_max_heading_level: 6
keywords: [linux, sudo]
tags: [linux]
---

:::tip Quote
"A noble man dies for one who truly knew him, sword in hand, departing the capital of Yan."
— "Ode to Jing Ke" by Tao Yuanming, Wei-Jin Period
:::

<details>
  <summary>全文</summary>
Prince Dan of Yan nurtured heroes with care,  
His heart set on vengeance against mighty Ying.  
He summoned a hundred valiant men,  
And at year’s end, Jing Qing came to his wing.  

"A noble soul dies for a friend who understands,  
Sword in hand, he strides from Yan’s capital."  
White steeds neigh on the boundless road,  
As comrades send him off, hearts full and full.  

His wrathful hair pierces his perilous crown,  
Fierce spirit surges through his warrior’s sash.  
They drink farewell by the River Yi’s edge,  
Heroes gather, their valor aflame in the clash.  

Gao Jianli strikes the mournful zhu,  
Song Yi’s voice soars, bold and profound.  
The mournful wind whispers its sorrows,  
Cold ripples rise, silent and unbound.  

The Shang note brings tears anew,  
The Yu melody stirs the warrior’s dread.  
He knows this path leads not to return,  
Yet his name shall live when he is dead.  

He mounts his chariot, never looking back,  
Speeds like wind to Qin’s imperial court.  
Swift he traverses ten thousand miles,  
Winding through cities, his mission his fort.  

The map unfurls, the plot is revealed,  
The tyrant trembles, gripped by fear.  
Alas! His blade lacked the final skill,  
The grand endeavor failed, yet crystal-clear:  

Though he perished in dust and strife,  
A thousand years still sing his story—
Such passion echoes beyond his life,  
Etched in the annals of eternal glory.
</details>


---

**Issue with sudo Command Execution**

Today, I encountered a problem with `sudo`. The `cfssl` command works fine under a **regular user** and **root user**, but when I tried running `sudo cfssl` as the regular user, it prompted `sudo: cfssl: command not found`.  

Upon investigation, I discovered that the `PATH` loaded by `sudo` is neither the regular user's nor root's. Instead, it uses the `secure_path` configured in `/etc/sudoers`:

```
Defaults    secure_path = /sbin:/bin:/usr/sbin:/usr/bin
```

This configuration does not include `/usr/local/bin`, where `cfssl` might be installed. There are two solutions:  
1. Add `/usr/local/bin` to the `secure_path` in `/etc/sudoers`.  
2. Move the `cfssl` binary to `/usr/bin`.  

This addresses the issue by ensuring `sudo` can locate the command in its restricted path.